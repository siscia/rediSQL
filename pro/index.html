<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Pro - RediSQL</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-116709819-1', 'auto');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">RediSQL</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Overview</a>
                    </li>
                
                
                
                    <li >
                        <a href="../references/">References</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">Pro</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Motivations <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../motivations/">Motivations</a>
</li>

                        
                            
<li >
    <a href="../pro_motivations/">PRO Motivations</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Blog <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../blog/analytics/">Analytics</a>
</li>

                        
                            
<li >
    <a href="../blog/JaaS/">JSON on Redis using RediSQL, SQL steroids for Redis</a>
</li>

                        
                            
<li >
    <a href="../blog/performances/">Double performances of RediSQL going zero copy</a>
</li>

                        
                            
<li >
    <a href="../blog/release_0.5.0/">Release 0.5.0</a>
</li>

                        
                            
<li >
    <a href="../blog/release_0.6.0/">Release 0.6.0</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../references/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../motivations/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/RedBeardLab/rediSQL">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#redisql-pro">RediSQL PRO</a></li>
        
            <li><a href="#main-difference">Main difference</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="redisql-pro">RediSQL PRO</h1>
<p>This document explains the architecture and principle of working of RediSQL PRO.</p>
<p>You can purchase RediSQL PRO, along with support <a href="https://plasso.com/s/epp4GbsJdp-redisql/signup/"><strong>here.</strong></a></p>
<p>Motivation and details about the cost are <a href="../pro_motivations/">described here</a>.</p>
<h2 id="main-difference">Main difference</h2>
<p>The PRO version offers two main features: <strong>non blocking command</strong> and <strong>replication</strong></p>
<h3 id="non-blocking-command">Non-blocking command</h3>
<p>Most command in RediSQL, all but <code>REDISQL.CREATE_DB</code>, are blocking command.</p>
<p>This means that Redis block the client, pass the command to a background thread that actually executed it and finally the result is returned to client unblocking it.</p>
<p>This works great in most cases, the main thread of Redis is free of doing other work (like answering standard redis command), there is no difference from the client point of view and your machine can use more than the single thread of redis to work for you.</p>
<p>However, sometimes you want to have non-blocking commands.</p>
<p>The blocking command will be executed in the main redis thread, this means that no other works will be done by Redis while executing your command.</p>
<p>We could expect the non-blocking command to be slightly faster (smaller latency) than the blocking one since there is no need for coordination between threads.</p>
<p>Finally, non-blocking commands are necessary for replication.</p>
<p>Non-blocking commands are invoke adding the <code>.NOW</code> suffix.</p>
<p>As an example, instead of <code>REDISQL.EXEC</code> that is a blocking command you can use <code>REDISQL.EXEC.NOW</code> to use the non-blocking version.</p>
<h4 id="when-to-use-non-blocking-commands">When to use non-blocking commands</h4>
<p>Non-blocking command takes the priority over blocking one.</p>
<p>Said so, generally, we are expecting users to use mostly the blocking commands.</p>
<p>However, if you need a very quick insert or a very quick lookup, then you should use the non-blocking version.</p>
<p>It is a bad idea to use non blocking commands for slow statements/query.</p>
<p>This because while you are executing a non-blocking command the main redis thread cannot do anything else, this means it cannot answer other redis commands.</p>
<h3 id="replication">Replication</h3>
<p>Redis offers two main methods for persisting data on disk so that in case of power failure of disastrous failure your data are reasonably safe.</p>
<p>RediSQL implement RDB persistency on the community version and AOF replication on the PRO version.</p>
<p>For the details of this two method, I suggest to read the Redis Documentation <a href="https://redis.io/topics/persistence">on this page</a>.</p>
<p>The mechanism behind AOF replication is exactly the same behind cluster replication used by redis. The same <strong>bytes</strong> used for AOF replication are also used for cluster replication, just send over different sockets.</p>
<p>For details about cluster replication you can consult the official Redis Documentation on <a href="https://redis.io/topics/cluster-tutorial">cluster</a> and on <a href="https://redis.io/topics/replication">replication</a></p>
<p>The PRO version, indeed, implements both AOF and cluster replication.</p>
<h4 id="effective-use-of-replication">Effective use of Replication</h4>
<p>In order to use replication effectively, you should understand a few simple concepts.</p>
<p>If a command is replicated it means that it could be re-executed.</p>
<p>It is <strong>vital</strong> to replicate commands that change the data you are storing, however, is pointless and wasteful to replicate commands that do not apply any change to the data.</p>
<p>You definitely want to replicate every INSERTs, UPDATEs or DELETEs while you should avoid replicating SELECTs.</p>
<p>Replicated commands are usually executed either when you are re-loading your dataset after some sort of failures or in slaves/replica with a train of other replicated commands is coming right after.</p>
<p>Consider what happens if you replicate a big SELECT. RediSQL is going to execute it and it is going to take some time, this while your application is waiting for redis to restart or when a train of replicated commands are piling up in the slaves/replicas buffers. And all this just for discard the result of the SELECT itself.</p>
<p>In order to avoid this effect is a good idea to use the query commands whenever possible (<a href="../references/#redisqlquery"><code>REDISQL.QUERY</code></a> and <a href="../references/#redisqlquery_statement"><code>REDISQL.QUERY_STATEMENT</code></a>), this command <strong>do not</strong> replicate and are marked as <code>readonly</code> which means that can be executed also on slaves/replicas providing interesting primitives of load balancing. (Eg. You could write on the master and read on the slaves.)</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
